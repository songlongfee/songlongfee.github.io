{"compress":true,"commitItems":[["3ffa21b4-2a5b-4170-85c6-6d4d33abef95",1553497780514,"---\nlayout:     post\ntitle:      ES6计算属性\nsubtitle:   \ndate:       2019-03-14\nauthor:     Song\nheader-img: img/post-bg-coding.jpg\ncatalog: true\ntags:\n    - ES6 计算属性\n---\n\n",[[1553497724153,["Administrator@PC-20181117PMVI",[[-1,33,"ES6计算属性"]],[40,40],[33,33]]],[1553497731550,["Administrator@PC-20181117PMVI",[[1,33,"x"]],[33,33],[34,34]]],[1553497732074,["Administrator@PC-20181117PMVI",[[-1,33,"x"]],[34,34],[33,33]]],[1553497732904,["Administrator@PC-20181117PMVI",[[1,33,"xu"]],[33,33],[35,35]]],[1553497733430,["Administrator@PC-20181117PMVI",[[-1,33,"xu"]],[35,35],[33,33]]],[1553497734840,["Administrator@PC-20181117PMVI",[[1,33,"虚拟"]],[33,33],[35,35]]],[1553497736783,["Administrator@PC-20181117PMVI",[[-1,33,"虚拟"]],[35,35],[33,33]]],[1553497746737,["Administrator@PC-20181117PMVI",[[1,33,"virtualDOM和DOM-diff"]],[33,33],[52,52]]],[1553497770816,["Administrator@PC-20181117PMVI",[[1,65,"x"]],[65,65],[66,66]]],[1553497771412,["Administrator@PC-20181117PMVI",[[-1,65,"x"]],[66,66],[65,65]]],[1553497778690,["Administrator@PC-20181117PMVI",[[1,65,"虚拟DOM和DOMdiff"]],[65,65],[78,78]]],[1553497780945,["Administrator@PC-20181117PMVI",[[1,74," "]],[74,74],[75,75]]],[1553497784086,["Administrator@PC-20181117PMVI",[[1,79,"算法"]],[79,79],[81,81]]],[1553497786526,["Administrator@PC-20181117PMVI",[[-1,102,"14"]],[104,104],[102,102]]],[1553497788364,["Administrator@PC-20181117PMVI",[[1,102,"25"]],[102,102],[104,104]]],[1553497796438,["Administrator@PC-20181117PMVI",[[-1,183,"ES6 计算属性"],[1,191,"v"]],[183,191],[184,184]]],[1553497799200,["Administrator@PC-20181117PMVI",[[1,184,"irtualDo"]],[184,184],[192,192]]],[1553497799748,["Administrator@PC-20181117PMVI",[[-1,191,"o"]],[192,192],[191,191]]],[1553497801723,["Administrator@PC-20181117PMVI",[[1,191,"OM diff"]],[191,191],[198,198]]],[1553497805252,["Administrator@PC-20181117PMVI",[[1,190," "]],[190,190],[191,191]]],[1553503867034,["Administrator@PC-20181117PMVI",[[-1,204,"\n"],[1,205,"y"]],[204,204],[205,205]]],[1553503867164,["Administrator@PC-20181117PMVI",[[1,205,"i"]],[205,205],[206,206]]],[1553503867661,["Administrator@PC-20181117PMVI",[[-1,205,"i"]],[206,206],[205,205]]],[1553503867798,["Administrator@PC-20181117PMVI",[[-1,204,"y"],[1,205,"\n"]],[205,205],[204,204]]],[1553503869339,["Administrator@PC-20181117PMVI",[[-1,204,"\n"],[1,205,"y"]],[204,204],[205,205]]],[1553503869760,["Administrator@PC-20181117PMVI",[[1,205,"ong"]],[205,205],[208,208]]],[1553503870287,["Administrator@PC-20181117PMVI",[[-1,205,"ong"]],[208,208],[205,205]]],[1553503870404,["Administrator@PC-20181117PMVI",[[-1,204,"y"],[1,205,"\n"]],[205,205],[204,204]]],[1553503871581,["Administrator@PC-20181117PMVI",[[-1,204,"\n"],[1,205,"yo"]],[204,204],[203,206]]],[1553503872498,["Administrator@PC-20181117PMVI",[[-1,203,"\nyo"],[1,206,"用"]],[203,203],[204,204]]],[1553503873824,["Administrator@PC-20181117PMVI",[[1,203,"\nyo"],[-1,203,"用"]],[204,204],[203,203]]],[1553503875640,["Administrator@PC-20181117PMVI",[[-1,205,"o"]],[206,206],[205,205]]],[1553503876440,["Administrator@PC-20181117PMVI",[[-1,204,"y"],[1,205,"\n"]],[205,205],[204,204]]],[1553503877538,["Administrator@PC-20181117PMVI",[[-1,204,"\n"],[1,205,"yo"]],[204,204],[203,206]]],[1553503877897,["Administrator@PC-20181117PMVI",[[-1,203,"\nyo"],[1,206,"用"]],[203,203],[204,204]]],[1553503879128,["Administrator@PC-20181117PMVI",[[1,203,"\nyo"],[-1,203,"用"]],[204,204],[203,203]]],[1553503880917,["Administrator@PC-20181117PMVI",[[-1,205,"o"]],[206,206],[205,205]]],[1553503881051,["Administrator@PC-20181117PMVI",[[-1,204,"y"],[1,205,"\n"]],[205,205],[204,204]]],[1553503882763,["Administrator@PC-20181117PMVI",[[-1,204,"\n"],[1,205,"yo"]],[204,204],[203,206]]],[1553503886032,["Administrator@PC-20181117PMVI",[[-1,203,"\nyo"]],[203,203],[203,203]]],[1553503890669,["Administrator@PC-20181117PMVI",[[1,203,"\n\n"]],[203,203],[204,204]]],[1553503891532,["Administrator@PC-20181117PMVI",[[1,205,"\n"]],[204,204],[205,205]]],[1553503893964,["Administrator@PC-20181117PMVI",[[-1,205,"\n"],[1,206,"用"]],[205,205],[206,206]]],[1553504021215,["Administrator@PC-20181117PMVI",[[1,206,"对象描述DOM"]],[206,206],[213,213]]],[1553504021572,["Administrator@PC-20181117PMVI",[[1,213,"\n\n"]],[213,213],[214,214]]],[1553504023120,["Administrator@PC-20181117PMVI",[[-1,214,"\n"],[1,215,"·"]],[214,214],[215,215]]],[1553504023551,["Administrator@PC-20181117PMVI",[[1,215,"··"]],[215,215],[217,217]]],[1553504024100,["Administrator@PC-20181117PMVI",[[-1,215,"··"]],[217,217],[215,215]]],[1553504024256,["Administrator@PC-20181117PMVI",[[-1,214,"·"],[1,215,"\n"]],[215,215],[214,214]]],[1553504025399,["Administrator@PC-20181117PMVI",[[-1,214,"\n"],[1,215,"`"]],[214,214],[215,215]]],[1553504025871,["Administrator@PC-20181117PMVI",[[1,215,"``"]],[215,215],[217,217]]],[1553504025895,["Administrator@PC-20181117PMVI",[[1,217,"language\n```\n"]],[217,217],[217,225]]],[1553504029728,["Administrator@PC-20181117PMVI",[[-1,217,"language"],[1,225,"\n"]],[217,225],[218,218]]],[1553504039463,["Administrator@PC-20181117PMVI",[[1,218,"class Element {}"]],[218,218],[234,234]]],[1553504040412,["Administrator@PC-20181117PMVI",[[1,233,"\n"]],[233,233],[234,234]]],[1553504040936,["Administrator@PC-20181117PMVI",[[1,234,"\n"]],[234,234],[235,235]]],[1553504043276,["Administrator@PC-20181117PMVI",[[1,234,"  "]],[234,234],[236,236]]],[1553504052042,["Administrator@PC-20181117PMVI",[[-1,234,"  "]],[236,236],[234,234]]],[1553504052915,["Administrator@PC-20181117PMVI",[[1,234,"  "]],[234,234],[236,236]]],[1553504130083,["Administrator@PC-20181117PMVI",[[1,236,"o"]],[236,236],[237,237]]],[1553504130538,["Administrator@PC-20181117PMVI",[[-1,236,"o"]],[237,237],[236,236]]],[1553504136626,["Administrator@PC-20181117PMVI",[[1,236,"constructor(el"]],[236,236],[250,250]]],[1553504185637,["Administrator@PC-20181117PMVI",[[1,213,"jie"]],[213,213],[216,216]]],[1553504186358,["Administrator@PC-20181117PMVI",[[-1,213,"jie"]],[216,216],[213,213]]],[1553504188090,["Administrator@PC-20181117PMVI",[[1,213,"结构"]],[213,213],[215,215]]],[1553504195689,["Administrator@PC-20181117PMVI",[[-1,250,"el"]],[252,252],[250,250]]],[1553504203439,["Administrator@PC-20181117PMVI",[[1,250,"type, props, children) {}"]],[250,250],[275,275]]],[1553504205307,["Administrator@PC-20181117PMVI",[[1,274,"\n  \n  "]],[274,274],[280,280]]],[1553504206161,["Administrator@PC-20181117PMVI",[[1,277,"  "]],[277,277],[279,279]]],[1553504207090,["Administrator@PC-20181117PMVI",[[1,279,"his"]],[279,279],[282,282]]],[1553504208012,["Administrator@PC-20181117PMVI",[[-1,279,"his"]],[282,282],[279,279]]],[1553504222139,["Administrator@PC-20181117PMVI",[[1,279,"this.type = type;"]],[279,279],[296,296]]],[1553504222568,["Administrator@PC-20181117PMVI",[[1,299,"  \n  "]],[296,296],[301,301]]],[1553504226721,["Administrator@PC-20181117PMVI",[[1,301,"this.props = porp"]],[301,301],[318,318]]],[1553504227977,["Administrator@PC-20181117PMVI",[[-1,314,"porp"]],[318,318],[314,314]]],[1553504229495,["Administrator@PC-20181117PMVI",[[1,314,"props;"]],[314,314],[320,320]]],[1553504230032,["Administrator@PC-20181117PMVI",[[1,323,"  \n  "]],[320,320],[325,325]]],[1553504236074,["Administrator@PC-20181117PMVI",[[1,325,"this.children = children;"]],[325,325],[350,350]]],[1553504803673,["Administrator@PC-20181117PMVI",[[1,361,"\n"]],[360,360],[361,361]]],[1553504805177,["Administrator@PC-20181117PMVI",[[-1,361,"\n"],[1,362,"y"]],[361,361],[362,362]]],[1553504805572,["Administrator@PC-20181117PMVI",[[1,362,"ong"]],[362,362],[365,365]]],[1553504806270,["Administrator@PC-20181117PMVI",[[-1,362,"ong"]],[365,365],[362,362]]],[1553504806372,["Administrator@PC-20181117PMVI",[[-1,361,"y"],[1,362,"\n"]],[362,362],[361,361]]],[1553504807531,["Administrator@PC-20181117PMVI",[[-1,361,"\n"],[1,362,"yo"]],[361,361],[360,363]]],[1553504809049,["Administrator@PC-20181117PMVI",[[-1,360,"\nyo"]],[360,360],[360,360]]],[1553504810223,["Administrator@PC-20181117PMVI",[[1,360,"\n\n"]],[360,360],[361,361]]],[1553504811982,["Administrator@PC-20181117PMVI",[[-1,361,"\n"],[1,362,"y"]],[361,361],[362,362]]],[1553504812715,["Administrator@PC-20181117PMVI",[[1,362,"ong"]],[362,362],[365,365]]],[1553504814358,["Administrator@PC-20181117PMVI",[[1,365,"用"]],[365,365],[366,366]]],[1553504816609,["Administrator@PC-20181117PMVI",[[-1,361,"yong"]],[365,365],[361,361]]],[1553504824885,["Administrator@PC-20181117PMVI",[[1,362,"creatElement"]],[362,362],[374,374]]],[1553504829361,["Administrator@PC-20181117PMVI",[[1,367,"e"]],[367,367],[368,368]]],[1553504852312,["Administrator@PC-20181117PMVI",[[1,375,"c"]],[375,375],[376,376]]],[1553504852887,["Administrator@PC-20181117PMVI",[[-1,375,"c"]],[376,376],[375,375]]],[1553504857159,["Administrator@PC-20181117PMVI",[[1,375,"创建虚拟DOM"]],[375,375],[382,382]]],[1553504857681,["Administrator@PC-20181117PMVI",[[1,382,"\n\n"]],[382,382],[383,383]]],[1553504859178,["Administrator@PC-20181117PMVI",[[-1,383,"\n"],[1,384,"`"]],[383,383],[384,384]]],[1553504859538,["Administrator@PC-20181117PMVI",[[1,384,"``"]],[384,384],[386,386]]],[1553504859563,["Administrator@PC-20181117PMVI",[[1,386,"language\n```\n"]],[386,386],[386,394]]],[1553504859853,["Administrator@PC-20181117PMVI",[[-1,386,"language"],[1,394,"\n"]],[386,394],[387,387]]],[1553504885036,["Administrator@PC-20181117PMVI",[[1,387,"createElement()"]],[387,387],[402,402]]],[1553504910619,["Administrator@PC-20181117PMVI",[[1,401,"'div', {}"]],[401,401],[410,410]]],[1553504930662,["Administrator@PC-20181117PMVI",[[1,409,"class: ac"]],[409,409],[418,418]]],[1553504931305,["Administrator@PC-20181117PMVI",[[-1,416,"ac"]],[418,418],[416,416]]],[1553504932556,["Administrator@PC-20181117PMVI",[[1,416,"''"]],[416,416],[418,418]]],[1553504934094,["Administrator@PC-20181117PMVI",[[1,417,"acti"]],[417,417],[421,421]]],[1553504934592,["Administrator@PC-20181117PMVI",[[1,421,"ve"]],[421,421],[423,423]]],[1553504939950,["Administrator@PC-20181117PMVI",[[1,425,", []"]],[425,425],[429,429]]],[1553504947567,["Administrator@PC-20181117PMVI",[[1,428,"'text'"]],[428,428],[434,434]]],[1553504979171,["Administrator@PC-20181117PMVI",[[1,437,"\n"]],[436,436],[437,437]]],[1553504994174,["Administrator@PC-20181117PMVI",[[1,437,"//传入type,prop"]],[437,437],[450,450]]],[1553504996341,["Administrator@PC-20181117PMVI",[[1,450,"s."]],[450,450],[452,452]]],[1553504997130,["Administrator@PC-20181117PMVI",[[-1,451,"."]],[452,452],[451,451]]],[1553504999065,["Administrator@PC-20181117PMVI",[[1,451,",children"]],[451,451],[460,460]]],[1553505019846,["Administrator@PC-20181117PMVI",[[-1,428,"'text'"],[1,434,"ch"]],[428,428],[430,430]]],[1553505020397,["Administrator@PC-20181117PMVI",[[1,430,"re"]],[430,430],[432,432]]],[1553505022775,["Administrator@PC-20181117PMVI",[[-1,428,"chre"]],[432,432],[428,428]]],[1553505025226,["Administrator@PC-20181117PMVI",[[1,428,"createEe"]],[428,428],[436,436]]],[1553505025742,["Administrator@PC-20181117PMVI",[[-1,435,"e"]],[436,436],[435,435]]],[1553505028538,["Administrator@PC-20181117PMVI",[[1,435,"lement()"]],[435,435],[443,443]]],[1553505050521,["Administrator@PC-20181117PMVI",[[1,442,"'span', {}"]],[442,442],[452,452]]],[1553505054119,["Administrator@PC-20181117PMVI",[[1,451,"class:"]],[451,451],[457,457]]],[1553505055591,["Administrator@PC-20181117PMVI",[[1,457," ''"]],[457,457],[460,460]]],[1553505070710,["Administrator@PC-20181117PMVI",[[1,459,"active"]],[459,459],[465,465]]],[1553505079219,["Administrator@PC-20181117PMVI",[[1,467,", []"]],[467,467],[471,471]]],[1553505088261,["Administrator@PC-20181117PMVI",[[1,470,"'text'"]],[470,470],[476,476]]],[1553505145046,["Administrator@PC-20181117PMVI",[[-1,424,"}, [createElement('span', {class: 'active'}, "]],[426,469],[424,424]]],[1553505149374,["Administrator@PC-20181117PMVI",[[1,424,"}, [createElement('span', {class: 'active'}, "]],[424,424],[426,469]]],[1553505150678,["Administrator@PC-20181117PMVI",[[-1,426," [createElement('span', {class: 'active'}, "]],[426,469],[426,426]]],[1553505162382,["Administrator@PC-20181117PMVI",[[1,426," "]],[426,426],[427,427]]],[1553506475077,["Administrator@PC-20181117PMVI",[[1,361,"\n"]],[361,361],[362,362]]],[1553506475293,["Administrator@PC-20181117PMVI",[[1,362,"\n"]],[362,362],[363,363]]],[1553506480346,["Administrator@PC-20181117PMVI",[[1,362,"ch"]],[362,362],[364,364]]],[1553506480945,["Administrator@PC-20181117PMVI",[[-1,362,"ch"]],[364,364],[362,362]]],[1553506490103,["Administrator@PC-20181117PMVI",[[1,362,"创建虚拟DOM，返回虚拟节点"]],[362,362],[376,376]]],[1553506490724,["Administrator@PC-20181117PMVI",[[1,377,"\n"]],[376,376],[377,377]]],[1553506492476,["Administrator@PC-20181117PMVI",[[1,377,"```"]],[377,377],[380,380]]],[1553506500282,["Administrator@PC-20181117PMVI",[[1,381,"\n"]],[380,380],[381,381]]],[1553506501744,["Administrator@PC-20181117PMVI",[[1,381,"```"]],[381,381],[384,384]]],[1553506503298,["Administrator@PC-20181117PMVI",[[1,381,"\n"]],[380,380],[381,381]]],[1553506509076,["Administrator@PC-20181117PMVI",[[1,381,"function cr"]],[381,381],[392,392]]],[1553506513026,["Administrator@PC-20181117PMVI",[[1,392,"eateElement()"]],[392,392],[405,405]]],[1553506535159,["Administrator@PC-20181117PMVI",[[1,404,"type, props, children"]],[404,404],[425,425]]],[1553506537671,["Administrator@PC-20181117PMVI",[[1,426," {"]],[426,426],[428,428]]],[1553506539548,["Administrator@PC-20181117PMVI",[[-1,426," {"]],[428,428],[426,426]]],[1553506541873,["Administrator@PC-20181117PMVI",[[1,426," {}"]],[426,426],[429,429]]],[1553506543470,["Administrator@PC-20181117PMVI",[[1,428,"\n"]],[428,428],[429,429]]],[1553506545885,["Administrator@PC-20181117PMVI",[[1,429,"\n"]],[429,429],[430,430]]],[1553506556098,["Administrator@PC-20181117PMVI",[[1,429,"  return new Element();"]],[429,429],[452,452]]],[1553506562414,["Administrator@PC-20181117PMVI",[[1,450,"type, props, children"]],[450,450],[471,471]]],[1553506908749,["Administrator@PC-20181117PMVI",[[1,586,"\n"]],[585,585],[586,586]]],[1553506908901,["Administrator@PC-20181117PMVI",[[1,587,"\n"]],[586,586],[587,587]]],[1553506914473,["Administrator@PC-20181117PMVI",[[-1,587,"\n"]],[587,587],[586,586]]],[1553506915196,["Administrator@PC-20181117PMVI",[[-1,586,"\n"],[1,587,"x"]],[586,586],[587,587]]],[1553506915367,["Administrator@PC-20181117PMVI",[[1,587,"u"]],[587,587],[588,588]]],[1553506915795,["Administrator@PC-20181117PMVI",[[-1,587,"u"]],[588,588],[587,587]]],[1553506915913,["Administrator@PC-20181117PMVI",[[-1,586,"x"],[1,587,"\n"]],[587,587],[586,586]]],[1553506916598,["Administrator@PC-20181117PMVI",[[-1,586,"\n"],[1,587,"xu"]],[586,586],[585,588]]],[1553506918237,["Administrator@PC-20181117PMVI",[[-1,585,"\nxu"]],[585,585],[585,585]]],[1553506919459,["Administrator@PC-20181117PMVI",[[1,585,"\n\n"]],[585,585],[586,586]]],[1553506921495,["Administrator@PC-20181117PMVI",[[-1,586,"\n"],[1,587,"x"]],[586,586],[587,587]]],[1553506924430,["Administrator@PC-20181117PMVI",[[1,587,"uan渲染"]],[587,587],[592,592]]],[1553506926822,["Administrator@PC-20181117PMVI",[[-1,586,"xuan"]],[590,590],[586,586]]],[1553506950217,["Administrator@PC-20181117PMVI",[[-1,587,"染"]],[588,588],[587,587]]],[1553506950365,["Administrator@PC-20181117PMVI",[[-1,586,"渲"],[1,587,"\n"]],[587,587],[586,586]]],[1553506950980,["Administrator@PC-20181117PMVI",[[-1,586,"\n"],[1,587,"r"]],[586,586],[587,587]]],[1553506953349,["Administrator@PC-20181117PMVI",[[1,587,"ender方法"]],[587,587],[594,594]]],[1553506954640,["Administrator@PC-20181117PMVI",[[1,594,"\n\n"]],[594,594],[595,595]]],[1553506963291,["Administrator@PC-20181117PMVI",[[1,594,"zhua"]],[594,594],[598,598]]],[1553506964111,["Administrator@PC-20181117PMVI",[[-1,594,"zhua"]],[598,598],[594,594]]],[1553506968479,["Administrator@PC-20181117PMVI",[[1,594,"转换真是"]],[594,594],[598,598]]],[1553506969048,["Administrator@PC-20181117PMVI",[[-1,596,"真是"]],[598,598],[596,596]]],[1553506974381,["Administrator@PC-20181117PMVI",[[1,596,"真实DOM"]],[596,596],[601,601]]],[1553506975107,["Administrator@PC-20181117PMVI",[[1,603,"\n"]],[601,601],[602,602]]],[1553507294098,["Administrator@PC-20181117PMVI",[[1,602,"functi"]],[602,602],[608,608]]],[1553507300742,["Administrator@PC-20181117PMVI",[[1,608,"on render(domObj) {}"]],[608,608],[628,628]]],[1553507301815,["Administrator@PC-20181117PMVI",[[1,627,"\n"]],[627,627],[628,628]]],[1553507302332,["Administrator@PC-20181117PMVI",[[1,628,"\n"]],[628,628],[629,629]]],[1553507304511,["Administrator@PC-20181117PMVI",[[1,628,"  "]],[628,628],[630,630]]],[1553507306538,["Administrator@PC-20181117PMVI",[[-1,628,"  "]],[630,630],[628,628]]],[1553507307575,["Administrator@PC-20181117PMVI",[[1,628,"  "]],[628,628],[630,630]]],[1553507308569,["Administrator@PC-20181117PMVI",[[-1,628,"  "]],[630,630],[628,628]]],[1553507340719,["Administrator@PC-20181117PMVI",[[1,628,"  let el = document.createElement(domObj.type);"]],[628,628],[675,675]]],[1553507351023,["Administrator@PC-20181117PMVI",[[1,676,"  \n"]],[675,675],[678,678]]],[1553507351353,["Administrator@PC-20181117PMVI",[[1,678,"for (let key in domObj.props) { // 设置属性的方法 setAttr(el, key, domObj.props[key]); }"]],[678,678],[759,759]]],[1553507356093,["Administrator@PC-20181117PMVI",[[-1,709," // 设置属性的方法 "]],[709,721],[709,709]]],[1553507357520,["Administrator@PC-20181117PMVI",[[1,709,"\n  "]],[709,709],[712,712]]],[1553507360369,["Administrator@PC-20181117PMVI",[[-1,748," "]],[749,749],[748,748]]],[1553507361236,["Administrator@PC-20181117PMVI",[[1,748,"\n  "]],[748,748],[751,751]]],[1553507363635,["Administrator@PC-20181117PMVI",[[1,712,"  "]],[712,712],[714,714]]],[1553507390221,["Administrator@PC-20181117PMVI",[[1,755,"  \n"]],[754,754],[757,757]]],[1553507393016,["Administrator@PC-20181117PMVI",[[1,678,"\n  "]],[675,675],[678,678]]],[1553507395018,["Administrator@PC-20181117PMVI",[[-1,758,"  "],[1,760,"\n"]],[760,760],[759,759]]],[1553507395368,["Administrator@PC-20181117PMVI",[[1,759,"domObj.children.forEach(child => { child = (child instanceof Element) ? render(child) : document.createTextNode(child); // 添加到对应元素内 el.appendChild(child); });\n\n链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"]],[759,759],[1010,1010]]],[1553507400089,["Administrator@PC-20181117PMVI",[[-1,919,"链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"]],[919,1010],[919,919]]],[1553507400642,["Administrator@PC-20181117PMVI",[[-1,919,"\n"]],[919,919],[918,918]]],[1553507401282,["Administrator@PC-20181117PMVI",[[-1,918,"\n"]],[918,918],[917,917]]],[1553507405011,["Administrator@PC-20181117PMVI",[[-1,878," // 添加到对应元素内 "]],[878,891],[878,878]]],[1553507416523,["Administrator@PC-20181117PMVI",[[1,602,"\n"]],[601,601],[602,602]]],[1553507418306,["Administrator@PC-20181117PMVI",[[1,602,"```"]],[602,602],[605,605]]],[1553507418333,["Administrator@PC-20181117PMVI",[[1,605,"language\n```\n"]],[605,605],[605,613]]],[1553507421319,["Administrator@PC-20181117PMVI",[[1,925,"\n"]],[923,923],[924,924]]],[1553507422222,["Administrator@PC-20181117PMVI",[[1,924,"```"]],[924,924],[927,927]]],[1553507422248,["Administrator@PC-20181117PMVI",[[1,927,"language\n```\n"]],[927,927],[927,935]]],[1553507425572,["Administrator@PC-20181117PMVI",[[-1,927,"language\n```"]],[927,939],[927,927]]],[1553507428336,["Administrator@PC-20181117PMVI",[[-1,605,"language\n```"]],[605,617],[605,605]]],[1553507431047,["Administrator@PC-20181117PMVI",[[-1,606,"\n"]],[606,606],[605,605]]],[1553507445767,["Administrator@PC-20181117PMVI",[[1,763,"  "]],[763,763],[765,765]]],[1553507450563,["Administrator@PC-20181117PMVI",[[1,911,"  \n"]],[910,910],[913,913]]],[1553507451939,["Administrator@PC-20181117PMVI",[[-1,911,"  "],[1,913,"\n"]],[913,913],[912,912]]],[1553507453178,["Administrator@PC-20181117PMVI",[[-1,912,"\n"]],[912,912],[911,911]]],[1553507456805,["Administrator@PC-20181117PMVI",[[1,911,"  return el;"]],[911,911],[923,923]]],[1553507459643,["Administrator@PC-20181117PMVI",[[1,913,"\n  "]],[913,913],[916,916]]],[1553507484123,["Administrator@PC-20181117PMVI",[[1,929,"\n"]],[928,928],[929,929]]],[1553507484921,["Administrator@PC-20181117PMVI",[[1,930,"\n"]],[929,929],[930,930]]],[1553507485692,["Administrator@PC-20181117PMVI",[[1,930,"function setAttr(node, key, value) { switch(key) { case 'value': // node是一个input或者textarea就直接设置其value即可 if (node.tagName.toLowerCase() === 'input' || node.tagName.toLowerCase() === 'textarea') { node.value = value; } else { node.setAttribute(key, value); } break; case 'style': // 直接赋值行内样式 node.style.cssText = value; break; default: node.setAttribute(key, value); break; } }\n\n链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"]],[930,930],[1398,1398]]],[1553507496882,["Administrator@PC-20181117PMVI",[[-1,995,"// node是一个input或者textarea就直接设置其value即可 "]],[994,1033],[994,994]]],[1553507509970,["Administrator@PC-20181117PMVI",[[-1,1268,"链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n"]],[1267,1359],[1267,1267]]],[1553507511236,["Administrator@PC-20181117PMVI",[[-1,1267,"\n"]],[1267,1267],[1266,1266]]],[1553507526062,["Administrator@PC-20181117PMVI",[[-1,799," "]],[800,800],[799,799]]],[1553507526524,["Administrator@PC-20181117PMVI",[[1,799,"\n  "]],[799,799],[802,802]]],[1553507531232,["Administrator@PC-20181117PMVI",[[1,802,"  "]],[802,802],[804,804]]],[1553507540389,["Administrator@PC-20181117PMVI",[[1,888,"\n    "]],[888,888],[893,893]]],[1553507554691,["Administrator@PC-20181117PMVI",[[-1,975," "]],[976,976],[975,975]]],[1553507558456,["Administrator@PC-20181117PMVI",[[1,975,"\n"]],[975,975],[976,976]]],[1553507560106,["Administrator@PC-20181117PMVI",[[1,976,"  "]],[976,976],[978,978]]],[1553507562937,["Administrator@PC-20181117PMVI",[[-1,991," "]],[992,992],[991,991]]],[1553507564174,["Administrator@PC-20181117PMVI",[[1,991,"\n    "]],[991,991],[996,996]]],[1553507566517,["Administrator@PC-20181117PMVI",[[-1,1009," "]],[1010,1010],[1009,1009]]],[1553507567312,["Administrator@PC-20181117PMVI",[[1,1009,"\n      "]],[1009,1009],[1016,1016]]],[1553507576867,["Administrator@PC-20181117PMVI",[[-1,1106," "]],[1107,1107],[1106,1106]]],[1553507577120,["Administrator@PC-20181117PMVI",[[1,1106,"\n      "]],[1106,1106],[1113,1113]]],[1553507580433,["Administrator@PC-20181117PMVI",[[-1,1132," "]],[1133,1133],[1132,1132]]],[1553507580687,["Administrator@PC-20181117PMVI",[[1,1132,"\n      "]],[1132,1132],[1139,1139]]],[1553507581809,["Administrator@PC-20181117PMVI",[[-1,1138," "]],[1139,1139],[1138,1138]]],[1553507584894,["Administrator@PC-20181117PMVI",[[1,1138,"  "]],[1138,1138],[1140,1140]]],[1553507587520,["Administrator@PC-20181117PMVI",[[-1,1138,"  "]],[1140,1140],[1138,1138]]],[1553507587894,["Administrator@PC-20181117PMVI",[[1,1138," "]],[1138,1138],[1139,1139]]],[1553507589446,["Administrator@PC-20181117PMVI",[[1,1113,"  "]],[1113,1113],[1115,1115]]],[1553507591951,["Administrator@PC-20181117PMVI",[[-1,1149," "]],[1150,1150],[1149,1149]]],[1553507592222,["Administrator@PC-20181117PMVI",[[1,1149,"\n      "]],[1149,1149],[1156,1156]]],[1553507599471,["Administrator@PC-20181117PMVI",[[-1,1186," "]],[1187,1187],[1186,1186]]],[1553507599966,["Administrator@PC-20181117PMVI",[[1,1186,"\n      "]],[1186,1186],[1193,1193]]],[1553507605102,["Administrator@PC-20181117PMVI",[[-1,1201," "]],[1202,1202],[1201,1201]]],[1553507605361,["Administrator@PC-20181117PMVI",[[1,1201,"\n      "]],[1201,1201],[1208,1208]]],[1553507608941,["Administrator@PC-20181117PMVI",[[-1,1222,"// 直接赋值行内样式 "]],[1221,1233],[1221,1221]]],[1553507613777,["Administrator@PC-20181117PMVI",[[-1,1256," "]],[1257,1257],[1256,1256]]],[1553507614041,["Administrator@PC-20181117PMVI",[[1,1256,"\n      "]],[1256,1256],[1263,1263]]],[1553507616109,["Administrator@PC-20181117PMVI",[[-1,1249," "]],[1250,1250],[1249,1249]]],[1553507616349,["Administrator@PC-20181117PMVI",[[1,1249,"\n      "]],[1249,1249],[1256,1256]]],[1553507625967,["Administrator@PC-20181117PMVI",[[-1,1308," "]],[1309,1309],[1308,1308]]],[1553507627589,["Administrator@PC-20181117PMVI",[[1,1308,"\n      "]],[1308,1308],[1315,1315]]],[1553507653346,["Administrator@PC-20181117PMVI",[[1,1156,"  "]],[1156,1156],[1158,1158]]],[1553507665025,["Administrator@PC-20181117PMVI",[[-1,1196," "]],[1197,1197],[1196,1196]]],[1553507665730,["Administrator@PC-20181117PMVI",[[1,1196,"\n      "]],[1196,1196],[1203,1203]]],[1553507674090,["Administrator@PC-20181117PMVI",[[-1,1214,"  "]],[1216,1216],[1214,1214]]],[1553507679622,["Administrator@PC-20181117PMVI",[[-1,1227," "]],[1228,1228],[1227,1227]]],[1553507681107,["Administrator@PC-20181117PMVI",[[1,1227,"\n      "]],[1227,1227],[1234,1234]]],[1553507686634,["Administrator@PC-20181117PMVI",[[-1,1279,"  "]],[1281,1281],[1279,1279]]],[1553507703711,["Administrator@PC-20181117PMVI",[[-1,1333," "]],[1334,1334],[1333,1333]]],[1553507704051,["Administrator@PC-20181117PMVI",[[1,1333,"\n      "]],[1333,1333],[1340,1340]]],[1553507705425,["Administrator@PC-20181117PMVI",[[-1,1339," "]],[1340,1340],[1339,1339]]],[1553507708029,["Administrator@PC-20181117PMVI",[[-1,1331," "]],[1332,1332],[1331,1331]]],[1553507708323,["Administrator@PC-20181117PMVI",[[1,1331,"\n      "]],[1331,1331],[1338,1338]]],[1553507716150,["Administrator@PC-20181117PMVI",[[-1,1334,"    "]],[1338,1338],[1334,1334]]],[1553507720349,["Administrator@PC-20181117PMVI",[[-1,1336,"     "]],[1336,1341],[1336,1336]]],[1553507762729,["Administrator@PC-20181117PMVI",[[-1,1287," "]],[1288,1288],[1287,1287]]],[1553507763986,["Administrator@PC-20181117PMVI",[[1,1287,"\n      "]],[1287,1287],[1294,1294]]],[1553507798070,["Administrator@PC-20181117PMVI",[[1,1344,"\n"]],[1343,1343],[1344,1344]]],[1553507798283,["Administrator@PC-20181117PMVI",[[1,1345,"\n"]],[1344,1344],[1345,1345]]],[1553507798932,["Administrator@PC-20181117PMVI",[[1,1345,"function renderDom(el, target) { target.appendChild(el); }"]],[1345,1345],[1403,1403]]],[1553507801464,["Administrator@PC-20181117PMVI",[[-1,1401," "]],[1402,1402],[1401,1401]]],[1553507801725,["Administrator@PC-20181117PMVI",[[1,1401,"\n"]],[1401,1401],[1402,1402]]],[1553507805633,["Administrator@PC-20181117PMVI",[[-1,1377," "]],[1378,1378],[1377,1377]]],[1553507807237,["Administrator@PC-20181117PMVI",[[1,1377,"\n"]],[1377,1377],[1378,1378]]],[1553507808227,["Administrator@PC-20181117PMVI",[[1,1378,"  "]],[1378,1378],[1380,1380]]],[1553508072050,["Administrator@PC-20181117PMVI",[[1,596,"x"]],[596,596],[597,597]]],[1553508072648,["Administrator@PC-20181117PMVI",[[-1,596,"x"]],[597,597],[596,596]]],[1553508077294,["Administrator@PC-20181117PMVI",[[1,596,"虚拟DOM为"]],[596,596],[602,602]]]],null,"Administrator@PC-20181117PMVI"],["3b8da5aa-2d8e-4171-8ee4-7cffaa8d69bb",1553584272150,"---\nlayout:     post\ntitle:      virtualDOM和DOM-diff\nsubtitle:   虚拟DOM和DOM diff算法\ndate:       2019-03-25\nauthor:     Song\nheader-img: img/post-bg-coding.jpg\ncatalog: true\ntags:\n    - virtual DOM diff\n---\n\n用对象描述DOM结构\n```\nclass Element {\n  constructor(type, props, children) {\n    this.type = type;\n    this.props = props;\n    this.children = children;\n  }\n}\n```\n\n创建虚拟DOM，返回虚拟节点\n```\nfunction createElement(type, props, children) {\n  return new Element(type, props, children);\n}\n```\n用createElement创建虚拟DOM\n```\ncreateElement('div', {class: 'active'}, ['text'])])\n//传入type,props,children\n```\nrender方法转换虚拟DOM为真实DOM\n```\nfunction render(domObj) {\n  let el = document.createElement(domObj.type);\n  \n  for (let key in domObj.props) {\n    setAttr(el, key, domObj.props[key]);\n  }\n\n  domObj.children.forEach(child => {\n    child = (child instanceof Element) ? render(child) : document.createTextNode(child);\n    el.appendChild(child); });\n  \n  return el;\n}\n\nfunction setAttr(node, key, value) {\n  switch(key) {\n    case 'value':\n      if (node.tagName.toLowerCase() === 'input' || node.tagName.toLowerCase() === 'textarea') {\n        node.value = value;\n      } else {\n        node.setAttribute(key, value);\n      }\n      break;\n    case 'style':\n      node.style.cssText = value;\n      break;\n    default:\n      node.setAttribute(key, value);\n      break;\n  }\n}\n\nfunction renderDom(el, target) {\n  target.appendChild(el);\n}\n```\n\n\n",[[1553584255652,["Administrator@PC-20181117PMVI",[[-1,1417,"\n"],[1,1418,"`"]],[1417,1417],[1418,1418]]],[1553584256334,["Administrator@PC-20181117PMVI",[[1,1418,"``"]],[1418,1418],[1420,1420]]],[1553584256361,["Administrator@PC-20181117PMVI",[[1,1420,"language\n```\n"]],[1420,1420],[1420,1428]]],[1553584257718,["Administrator@PC-20181117PMVI",[[-1,1420,"language"],[1,1428,"\n"]],[1420,1428],[1421,1421]]],[1553584259000,["Administrator@PC-20181117PMVI",[[1,1421,"function diff(oldTree, newTree) { // 声明变量patches用来存放补丁的对象 let patches = {}; // 第一次比较应该是树的第0个索引 let index = 0; // 递归树 比较后的结果放到补丁里 walk(oldTree, newTree, index, patches); return patches; } function walk(oldNode, newNode, index, patches) { // 每个元素都有一个补丁 let current = []; if (!newNode) { // rule1 current.push({ type: 'REMOVE', index }); } else if (isString(oldNode) && isString(newNode)) { // 判断文本是否一致 if (oldNode !== newNode) { current.push({ type: 'TEXT', text: newNode }); } } else if (oldNode.type === newNode.type) { // 比较属性是否有更改 let attr = diffAttr(oldNode.props, newNode.props); if (Object.keys(attr).length > 0) { current.push({ type: 'ATTR', attr }); } // 如果有子节点，遍历子节点 diffChildren(oldNode.children, newNode.children, patches); } else { // 说明节点被替换了 current.push({ type: 'REPLACE', newNode}); } // 当前元素确实有补丁存在 if (current.length) { // 将元素和补丁对应起来，放到大补丁包中 patches[index] = current; } } function isString(obj) { return typeof obj === 'string'; } function diffAttr(oldAttrs, newAttrs) { let patch = {}; // 判断老的属性中和新的属性的关系 for (let key in oldAttrs) { if (oldAttrs[key] !== newAttrs[key]) { patch[key] = newAttrs[key]; // 有可能还是undefined } } for (let key in newAttrs) { // 老节点没有新节点的属性 if (!oldAttrs.hasOwnProperty(key)) { patch[key] = newAttrs[key]; } } return patch; } // 所有都基于一个序号来实现 let num = 0; function diffChildren(oldChildren, newChildren, patches) { // 比较老的第一个和新的第一个 oldChildren.forEach((child, index) => { walk(child, newChildren[index], ++num, patches); }); } // 默认导出 export default diff;\n\n作者：chenhongdong\n链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"]],[1421,1421],[3027,3027]]],[1553584268652,["Administrator@PC-20181117PMVI",[[-1,2919,"\n作者：chenhongdong\n链接：https://juejin.im/post/5c8e5e4951882545c109ae9c\n来源：掘金\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n"]],[2918,3027],[2918,2918]]],[1553584280226,["Administrator@PC-20181117PMVI",[[-1,1454," "]],[1455,1455],[1454,1454]]],[1553584280498,["Administrator@PC-20181117PMVI",[[1,1454,"\n"]],[1454,1454],[1455,1455]]],[1553584283160,["Administrator@PC-20181117PMVI",[[-1,1478," "]],[1479,1479],[1478,1478]]],[1553584283437,["Administrator@PC-20181117PMVI",[[1,1478,"\n"]],[1478,1478],[1479,1479]]],[1553584295779,["Administrator@PC-20181117PMVI",[[-1,1496," "]],[1497,1497],[1496,1496]]],[1553584296656,["Administrator@PC-20181117PMVI",[[1,1496,"\n"]],[1496,1496],[1497,1497]]],[1553584299301,["Administrator@PC-20181117PMVI",[[-1,1515," "]],[1516,1516],[1515,1515]]],[1553584299554,["Administrator@PC-20181117PMVI",[[1,1515,"\n"]],[1515,1515],[1516,1516]]],[1553584302491,["Administrator@PC-20181117PMVI",[[-1,1530," "]],[1531,1531],[1530,1530]]],[1553584302755,["Administrator@PC-20181117PMVI",[[1,1530,"\n"]],[1530,1530],[1531,1531]]],[1553584306582,["Administrator@PC-20181117PMVI",[[-1,1549," "]],[1550,1550],[1549,1549]]],[1553584306839,["Administrator@PC-20181117PMVI",[[1,1549,"\n"]],[1549,1549],[1550,1550]]],[1553584315056,["Administrator@PC-20181117PMVI",[[-1,1589," "]],[1590,1590],[1589,1589]]],[1553584315525,["Administrator@PC-20181117PMVI",[[1,1589,"\n"]],[1589,1589],[1590,1590]]],[1553584320633,["Administrator@PC-20181117PMVI",[[-1,1607," "]],[1608,1608],[1607,1607]]],[1553584320913,["Administrator@PC-20181117PMVI",[[1,1607,"\n"]],[1607,1607],[1608,1608]]],[1553584325086,["Administrator@PC-20181117PMVI",[[-1,1657," "]],[1658,1658],[1657,1657]]],[1553584325364,["Administrator@PC-20181117PMVI",[[1,1657,"\n"]],[1657,1657],[1658,1658]]],[1553584327579,["Administrator@PC-20181117PMVI",[[-1,1671," "]],[1672,1672],[1671,1671]]],[1553584329120,["Administrator@PC-20181117PMVI",[[1,1671,"\n"]],[1671,1671],[1672,1672]]],[1553584331807,["Administrator@PC-20181117PMVI",[[-1,1689," "]],[1690,1690],[1689,1689]]],[1553584332075,["Administrator@PC-20181117PMVI",[[1,1689,"\n"]],[1689,1689],[1690,1690]]],[1553584335506,["Administrator@PC-20181117PMVI",[[-1,1705," "]],[1706,1706],[1705,1705]]],[1553584335769,["Administrator@PC-20181117PMVI",[[1,1705,"\n"]],[1705,1705],[1706,1706]]],[1553584343843,["Administrator@PC-20181117PMVI",[[-1,1808," "]],[1809,1809],[1808,1808]]],[1553584344881,["Administrator@PC-20181117PMVI",[[1,1808,"\n"]],[1808,1808],[1809,1809]]],[1553584347096,["Administrator@PC-20181117PMVI",[[-1,1820," "]],[1821,1821],[1820,1820]]],[1553584347401,["Administrator@PC-20181117PMVI",[[1,1820,"\n"]],[1820,1820],[1821,1821]]],[1553584388764,["Administrator@PC-20181117PMVI",[[-1,1714," "]],[1715,1715],[1714,1714]]],[1553584389009,["Administrator@PC-20181117PMVI",[[1,1714,"\n"]],[1714,1714],[1715,1715]]],[1553584399190,["Administrator@PC-20181117PMVI",[[-1,1940," "]],[1941,1941],[1940,1940]]],[1553584399465,["Administrator@PC-20181117PMVI",[[1,1940,"\n"]],[1940,1940],[1941,1941]]],[1553584401587,["Administrator@PC-20181117PMVI",[[-1,1953," "]],[1954,1954],[1953,1953]]],[1553584401843,["Administrator@PC-20181117PMVI",[[1,1953,"\n"]],[1953,1953],[1954,1954]]],[1553584406571,["Administrator@PC-20181117PMVI",[[-1,2004," "]],[2005,2005],[2004,2004]]],[1553584406867,["Administrator@PC-20181117PMVI",[[1,2004,"\n"]],[2004,2004],[2005,2005]]],[1553584409780,["Administrator@PC-20181117PMVI",[[-1,2080," "]],[2081,2081],[2080,2080]]],[1553584410018,["Administrator@PC-20181117PMVI",[[1,2080,"\n"]],[2080,2080],[2081,2081]]],[1553584412957,["Administrator@PC-20181117PMVI",[[-1,2164," "]],[2165,2165],[2164,2164]]],[1553584413243,["Administrator@PC-20181117PMVI",[[1,2164,"\n"]],[2164,2164],[2165,2165]]],[1553584416039,["Administrator@PC-20181117PMVI",[[-1,2221," "]],[2222,2222],[2221,2221]]],[1553584416317,["Administrator@PC-20181117PMVI",[[1,2221,"\n"]],[2221,2221],[2222,2222]]],[1553584419590,["Administrator@PC-20181117PMVI",[[-1,2236," "]],[2237,2237],[2236,2236]]],[1553584419881,["Administrator@PC-20181117PMVI",[[1,2236,"\n"]],[2236,2236],[2237,2237]]],[1553584421683,["Administrator@PC-20181117PMVI",[[-1,2258," "]],[2259,2259],[2258,2258]]],[1553584421956,["Administrator@PC-20181117PMVI",[[1,2258,"\n"]],[2258,2258],[2259,2259]]],[1553584436933,["Administrator@PC-20181117PMVI",[[-1,2310," "]],[2311,2311],[2310,2310]]],[1553584437224,["Administrator@PC-20181117PMVI",[[1,2310,"\n"]],[2310,2310],[2311,2311]]],[1553584440442,["Administrator@PC-20181117PMVI",[[-1,2335," "]],[2336,2336],[2335,2335]]],[1553584440706,["Administrator@PC-20181117PMVI",[[1,2335,"\n"]],[2335,2335],[2336,2336]]],[1553584442910,["Administrator@PC-20181117PMVI",[[-1,2369," "]],[2370,2370],[2369,2369]]],[1553584443135,["Administrator@PC-20181117PMVI",[[1,2369,"\n"]],[2369,2369],[2370,2370]]],[1553584449189,["Administrator@PC-20181117PMVI",[[-1,2425," "]],[2426,2426],[2425,2425]]],[1553584449843,["Administrator@PC-20181117PMVI",[[1,2425,"\n"]],[2425,2425],[2426,2426]]],[1553584451965,["Administrator@PC-20181117PMVI",[[-1,2444," "]],[2445,2445],[2444,2444]]],[1553584452205,["Administrator@PC-20181117PMVI",[[1,2444,"\n"]],[2444,2444],[2445,2445]]],[1553584454647,["Administrator@PC-20181117PMVI",[[-1,2472," "]],[2473,2473],[2472,2472]]],[1553584454880,["Administrator@PC-20181117PMVI",[[1,2472,"\n"]],[2472,2472],[2473,2473]]],[1553584459130,["Administrator@PC-20181117PMVI",[[-1,2539," "]],[2540,2540],[2539,2539]]],[1553584459369,["Administrator@PC-20181117PMVI",[[1,2539,"\n"]],[2539,2539],[2540,2540]]],[1553584467325,["Administrator@PC-20181117PMVI",[[-1,2557," "]],[2558,2558],[2557,2557]]],[1553584468257,["Administrator@PC-20181117PMVI",[[1,2557,"\n"]],[2557,2557],[2558,2558]]],[1553584471701,["Administrator@PC-20181117PMVI",[[-1,2561," "]],[2562,2562],[2561,2561]]],[1553584471952,["Administrator@PC-20181117PMVI",[[1,2561,"\n"]],[2561,2561],[2562,2562]]],[1553584474256,["Administrator@PC-20181117PMVI",[[-1,2589," "]],[2590,2590],[2589,2589]]],[1553584474510,["Administrator@PC-20181117PMVI",[[1,2589,"\n"]],[2589,2589],[2590,2590]]],[1553584482662,["Administrator@PC-20181117PMVI",[[-1,2604," "]],[2605,2605],[2604,2604]]],[1553584482973,["Administrator@PC-20181117PMVI",[[1,2604,"\n"]],[2604,2604],[2605,2605]]],[1553584489211,["Administrator@PC-20181117PMVI",[[-1,2673," "]],[2674,2674],[2673,2673]]],[1553584489470,["Administrator@PC-20181117PMVI",[[1,2673,"\n"]],[2673,2673],[2674,2674]]],[1553584491664,["Administrator@PC-20181117PMVI",[[-1,2689," "]],[2690,2690],[2689,2689]]],[1553584491954,["Administrator@PC-20181117PMVI",[[1,2689,"\n"]],[2689,2689],[2690,2690]]],[1553584494565,["Administrator@PC-20181117PMVI",[[-1,2777," "]],[2778,2778],[2777,2777]]],[1553584494879,["Administrator@PC-20181117PMVI",[[1,2777,"\n"]],[2777,2777],[2778,2778]]],[1553584499338,["Administrator@PC-20181117PMVI",[[-1,2889," "]],[2890,2890],[2889,2889]]],[1553584499586,["Administrator@PC-20181117PMVI",[[1,2889,"\n"]],[2889,2889],[2890,2890]]],[1553584501655,["Administrator@PC-20181117PMVI",[[-1,2897," "]],[2898,2898],[2897,2897]]],[1553584501904,["Administrator@PC-20181117PMVI",[[1,2897,"\n"]],[2897,2897],[2898,2898]]],[1553584508377,["Administrator@PC-20181117PMVI",[[-1,2705," "]],[2706,2706],[2705,2705]]],[1553584508648,["Administrator@PC-20181117PMVI",[[1,2705,"\n"]],[2705,2705],[2706,2706]]],[1553584516529,["Administrator@PC-20181117PMVI",[[-1,2794," "]],[2795,2795],[2794,2794]]],[1553584517564,["Administrator@PC-20181117PMVI",[[1,2794,"\n"]],[2794,2794],[2795,2795]]],[1553584532986,["Administrator@PC-20181117PMVI",[[-1,2834," "]],[2835,2835],[2834,2834]]],[1553584534734,["Administrator@PC-20181117PMVI",[[1,2834,"\n"]],[2834,2834],[2835,2835]]],[1553584554221,["Administrator@PC-20181117PMVI",[[-1,2883," "]],[2884,2884],[2883,2883]]],[1553584554569,["Administrator@PC-20181117PMVI",[[1,2883,"\n"]],[2883,2883],[2884,2884]]],[1553584556729,["Administrator@PC-20181117PMVI",[[-1,2887," "]],[2888,2888],[2887,2887]]],[1553584557001,["Administrator@PC-20181117PMVI",[[1,2887,"\n"]],[2887,2887],[2888,2888]]],[1553584562281,["Administrator@PC-20181117PMVI",[[1,2835,"  "],[1,2884,"  "]],[2835,2887],[2835,2891]]],[1553584570222,["Administrator@PC-20181117PMVI",[[1,2837,"  "]],[2837,2837],[2839,2839]]],[1553584583349,["Administrator@PC-20181117PMVI",[[-1,2096," "]],[2097,2097],[2096,2096]]],[1553584583913,["Administrator@PC-20181117PMVI",[[1,2096,"\n"]],[2096,2096],[2097,2097]]],[1553584587702,["Administrator@PC-20181117PMVI",[[-1,2176," "]],[2177,2177],[2176,2176]]],[1553584587945,["Administrator@PC-20181117PMVI",[[1,2176,"\n"]],[2176,2176],[2177,2177]]],[1553584603211,["Administrator@PC-20181117PMVI",[[-1,1605," "]],[1606,1606],[1605,1605]]],[1553584603928,["Administrator@PC-20181117PMVI",[[1,1605,"\n"]],[1605,1605],[1606,1606]]],[1553584607291,["Administrator@PC-20181117PMVI",[[1,1455,"  "],[1,1479,"  "],[1,1497,"  "],[1,1516,"  "],[1,1531,"  "],[1,1550,"  "],[1,1590,"  "]],[1455,1605],[1455,1619]]],[1553584670272,["Administrator@PC-20181117PMVI",[[1,1720,"  "]],[1720,1720],[1722,1722]]],[1553584672113,["Administrator@PC-20181117PMVI",[[1,1731,"  "]],[1731,1731],[1733,1733]]],[1553584673841,["Administrator@PC-20181117PMVI",[[-1,1773," "]],[1774,1774],[1773,1773]]],[1553584674126,["Administrator@PC-20181117PMVI",[[1,1773,"\n  "]],[1773,1773],[1776,1776]]],[1553584681326,["Administrator@PC-20181117PMVI",[[1,1829,"  "]],[1829,1829],[1831,1831]]],[1553584682811,["Administrator@PC-20181117PMVI",[[1,1843,"  "]],[1843,1843],[1845,1845]]],[1553584686413,["Administrator@PC-20181117PMVI",[[-1,1871," "]],[1872,1872],[1871,1871]]],[1553584688157,["Administrator@PC-20181117PMVI",[[1,1871,"\n    "]],[1871,1871],[1876,1876]]],[1553584692795,["Administrator@PC-20181117PMVI",[[-1,1922," "]],[1923,1923],[1922,1922]]],[1553584693053,["Administrator@PC-20181117PMVI",[[1,1922,"\n    "]],[1922,1922],[1927,1927]]],[1553584696466,["Administrator@PC-20181117PMVI",[[-1,1928," "]],[1929,1929],[1928,1928]]],[1553584696715,["Administrator@PC-20181117PMVI",[[1,1928,"\n    "]],[1928,1928],[1933,1933]]],[1553584702643,["Administrator@PC-20181117PMVI",[[-1,1931,"  "]],[1933,1933],[1931,1931]]],[1553584704484,["Administrator@PC-20181117PMVI",[[1,1975,"  "]],[1975,1975],[1977,1977]]],[1553584706680,["Administrator@PC-20181117PMVI",[[1,1990,"  "]],[1990,1990],[1992,1992]]],[1553584714834,["Administrator@PC-20181117PMVI",[[1,2043,"  "]],[2043,2043],[2045,2045]]],[1553584717429,["Administrator@PC-20181117PMVI",[[1,2081,"    "]],[2081,2081],[2085,2085]]],[1553584719979,["Administrator@PC-20181117PMVI",[[-1,2084," "]],[2085,2085],[2084,2084]]],[1553584722952,["Administrator@PC-20181117PMVI",[[1,2084,"\n    "]],[2084,2084],[2089,2089]]],[1553584728048,["Administrator@PC-20181117PMVI",[[1,2129,"    "]],[2129,2129],[2133,2133]]],[1553584731379,["Administrator@PC-20181117PMVI",[[1,2149,"    "]],[2149,2149],[2153,2153]]],[1553584736006,["Administrator@PC-20181117PMVI",[[-1,2211," "]],[2212,2212],[2211,2211]]],[1553584736266,["Administrator@PC-20181117PMVI",[[1,2211,"\n    "]],[2211,2211],[2216,2216]]],[1553584745289,["Administrator@PC-20181117PMVI",[[-1,2126," "]],[2127,2127],[2126,2126]]],[1553584745537,["Administrator@PC-20181117PMVI",[[1,2126,"\n    "]],[2126,2126],[2131,2131]]],[1553584748030,["Administrator@PC-20181117PMVI",[[-1,2129,"  "]],[2131,2131],[2129,2129]]],[1553584752901,["Administrator@PC-20181117PMVI",[[-1,2133,"  "]],[2135,2135],[2133,2133]]],[1553584755417,["Administrator@PC-20181117PMVI",[[-1,2151,"  "]],[2153,2153],[2151,2151]]],[1553584794173,["Administrator@PC-20181117PMVI",[[-1,1421,"function diff(oldTree, newTree) {\n  // 声明变量patches用来存放补丁的对象\n  let patches = {};\n  // 第一次比较应该是树的第0个索引\n  let index = 0;\n  // 递归树 比较后的结果放到补丁里\n  walk(oldTree, newTree, index, patches);\n  return patches;\n}\nfunction walk(oldNode, newNode, index, patches) {\n// 每个元素都有一个补丁\nlet current = [];\nif (!newNode) {\n  // rule1\n  current.push({ type: 'REMOVE', index });\n  } else if (isString(oldNode) && isString(newNode)) {\n  // 判断文本是否一致\n  if (oldNode !== newNode) {\n    current.push({ type: 'TEXT', text: newNode });\n    }\n  } else if (oldNode.type === newNode.type) {\n  // 比较属性是否有更改\n  let attr = diffAttr(oldNode.props, newNode.props);\n  if (Object.keys(attr).length > 0) {    \n    current.push({ type: 'ATTR', attr });\n  }\n  // 如果有子节点，遍历子节点\n  diffChildren(oldNode.children, newNode.children, patches);\n    } else {\n// 说明节点被替换了\ncurrent.push({ type: 'REPLACE', newNode}); }\n// 当前元素确实有补丁存在\nif (current.length) {\n// 将元素和补丁对应起来，放到大补丁包中 patches[index] = current; } }\nfunction isString(obj) {\nreturn typeof obj === 'string'; }\nfunction diffAttr(oldAttrs, newAttrs) { let patch = {};\n// 判断老的属性中和新的属性的关系\nfor (let key in oldAttrs) {\nif (oldAttrs[key] !== newAttrs[key]) { patch[key] = newAttrs[key];\n// 有可能还是undefined\n} }\nfor (let key in newAttrs) {\n// 老节点没有新节点的属性\nif (!oldAttrs.hasOwnProperty(key)) { patch[key] = newAttrs[key]; } }\nreturn patch; }\n// 所有都基于一个序号来实现\nlet num = 0; function diffChildren(oldChildren, newChildren, patches) {\n// 比较老的第一个和新的第一个\noldChildren.forEach((child, index) => {\n    walk(child, newChildren[index], ++num, patches);\n  });\n}\n// 默认导出\nexport default diff;"]],[1421,2982],[1421,1421]]],[1553584795358,["Administrator@PC-20181117PMVI",[[1,1421,"function diff(oldTree, newTree) {\n    // 声明变量patches用来存放补丁的对象\n    let patches = {};\n    // 第一次比较应该是树的第0个索引\n    let index = 0;\n    // 递归树 比较后的结果放到补丁里\n    walk(oldTree, newTree, index, patches);\n\n    return patches;\n}\n\nfunction walk(oldNode, newNode, index, patches) {\n    // 每个元素都有一个补丁\n    let current = [];\n\n    if (!newNode) { // rule1\n        current.push({ type: 'REMOVE', index });\n    } else if (isString(oldNode) && isString(newNode)) {\n        // 判断文本是否一致\n        if (oldNode !== newNode) {\n            current.push({ type: 'TEXT', text: newNode });\n        }\n\n    } else if (oldNode.type === newNode.type) {\n        // 比较属性是否有更改\n        let attr = diffAttr(oldNode.props, newNode.props);\n        if (Object.keys(attr).length > 0) {\n            current.push({ type: 'ATTR', attr });\n        }\n        // 如果有子节点，遍历子节点\n        diffChildren(oldNode.children, newNode.children, patches);\n    } else {    // 说明节点被替换了\n        current.push({ type: 'REPLACE', newNode});\n    }\n    \n    // 当前元素确实有补丁存在\n    if (current.length) {\n        // 将元素和补丁对应起来，放到大补丁包中\n        patches[index] = current;\n    }\n}\n\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\n\nfunction diffAttr(oldAttrs, newAttrs) {\n    let patch = {};\n    // 判断老的属性中和新的属性的关系\n    for (let key in oldAttrs) {\n        if (oldAttrs[key] !== newAttrs[key]) {\n            patch[key] = newAttrs[key]; // 有可能还是undefined\n        }\n    }\n\n    for (let key in newAttrs) {\n        // 老节点没有新节点的属性\n        if (!oldAttrs.hasOwnProperty(key)) {\n            patch[key] = newAttrs[key];\n        }\n    }\n    return patch;\n}\n\n// 所有都基于一个序号来实现\nlet num = 0;\n\nfunction diffChildren(oldChildren, newChildren, patches) {\n    // 比较老的第一个和新的第一个\n    oldChildren.forEach((child, index) => {\n        walk(child, newChildren[index], ++num, patches);\n    });\n}\n\n// 默认导出\nexport default diff;"]],[1421,1421],[3248,3248]]],[1553584853816,["Administrator@PC-20181117PMVI",[[1,3253,"\n"]],[3252,3252],[3253,3253]]],[1553584856012,["Administrator@PC-20181117PMVI",[[-1,3253,"\n"],[1,3254,"`"]],[3253,3253],[3254,3254]]],[1553584856467,["Administrator@PC-20181117PMVI",[[1,3254,"``"]],[3254,3254],[3256,3256]]],[1553584856499,["Administrator@PC-20181117PMVI",[[1,3256,"language\n```\n"]],[3256,3256],[3256,3264]]],[1553584857495,["Administrator@PC-20181117PMVI",[[-1,3256,"language"],[1,3264,"\n"]],[3256,3264],[3257,3257]]],[1553584858397,["Administrator@PC-20181117PMVI",[[1,3257,"let allPatches;\nlet index = 0;  // 默认哪个需要打补丁\n\nfunction patch(node, patches) {\n    allPatches = patches;\n    \n    // 给某个元素打补丁\n    walk(node);\n}\n\nfunction walk(node) {\n    let current = allPatches[index++];\n    let childNodes = node.childNodes;\n\n    // 先序深度，继续遍历递归子节点\n    childNodes.forEach(child => walk(child));\n\n    if (current) {\n        doPatch(node, current); // 打上补丁\n    }\n}\n\nfunction doPatch(node, patches) {\n    // 遍历所有打过的补丁\n    patches.forEach(patch => {\n        switch (patch.type) {\n            case 'ATTR':\n                for (let key in patch.attr) {\n                    let value = patch.attr[key];\n                    if (value) {\n                        setAttr(node, key, value);\n                    } else {\n                        node.removeAttribute(key);\n                    }\n                }\n                break;\n            case 'TEXT':\n                node.textContent = patch.text;\n                break;\n            case 'REPLACE':\n                let newNode = patch.newNode;\n                newNode = (newNode instanceof Element) ? render(newNode) : document.createTextNode(newNode);\n                node.parentNode.replaceChild(newNode, node);\n                break;\n            case 'REMOVE':\n                node.parentNode.removeChild(node);\n                break;\n            default:\n                break;\n        }\n    });\n}\n\nexport default patch;"]],[3257,3257],[4645,4645]]],[1553584897791,["Administrator@PC-20181117PMVI",[[1,1416,"diff"]],[1416,1416],[1420,1420]]],[1553584907300,["Administrator@PC-20181117PMVI",[[1,1416,"DOM "]],[1416,1416],[1420,1420]]],[1553584922008,["Administrator@PC-20181117PMVI",[[1,3261,"\n"]],[3260,3260],[3261,3261]]],[1553584987515,["Administrator@PC-20181117PMVI",[[1,3261,"## patch补丁更新"]],[3261,3261],[3273,3273]]],[1553584990345,["Administrator@PC-20181117PMVI",[[-1,3261,"##"]],[3263,3263],[3261,3261]]]],null,"Administrator@PC-20181117PMVI"]]}