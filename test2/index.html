<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title></title>
  <link rel="stylesheet" href="./style.css?v1.0">
  <script>
    !(function() {
      function calculate() {
        var deviceWidth =document.documentElement.clientWidth;
        if (deviceWidth < 241) {
          deviceWidth = 240;
        } else if(deviceWidth < 320) {
          deviceWidth = 320;
        } else if(deviceWidth > 750) {
          deviceWidth = 750;
        }
        document.documentElement.style.fontSize =deviceWidth /37.5 +'px';
      }
      window.addEventListener('resize', calculate, false);
      calculate();
    })();

    function setSize(e) {
      var child = e.target;
      let url = child.src;
      var img = new Image();
      img.src = url;
      img.onload = function() {
        child.parentNode.setAttribute('data-size', img.width + 'x' + img.height);
      }
    }
  </script>
</head>
<body>
  <!-- 项目信息 -->
  <section>
    <header>
      <img src="./images/3.jpg" alt="">
      <div>
        <p>张三三<span>（工程总监）</span></p>
        <b>2022-07-22 13:30</b>
      </div>
    </header>
    <div class="house">
      <div>
        <p>户型</p>
        <span>3室 2厅 1厨 2卫</span>
      </div>
      <i></i>
      <div>
        <p>面积</p>
        <span>119.7㎡</span>
      </div>
    </div>
    <div class="address">
      <p class="ellipsis">小区名称：<span class="ellipsis">小区名称按时发斯蒂芬</span></p>
      <p class="ellipsis">公司名称：<span class="ellipsis">小区名称按时发斯蒂芬</span></p>
      <p>咨询电话：<a href="tel:0633-56989996">0633-56989996</a></p>
    </div>
  </section>
  
  <section>
    <!-- 巡检问题 -->
    <header>
      <img src="./images/3.jpg" alt="">
      <div>
        <p>张三三<span>（工程总监）</span></p>
        <b>2022-07-22 13:30</b>
      </div>
    </header>
    <p class="share-text">我是分享文案，我是分享文案，我是分享文案，我是分享文案，我是分享文案。</p>
    <!-- 一张图片/视频 -->
    <div class="gallery share-image" onclick="preview()">
      <div class="img1">
        <!-- data-url 文件地址 data-type 1 图片 2 视频 data-index 列表遍历索引 -->
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/1.jpg" data-index="0" data-type="1">
        <!-- 视频显示此播放按钮 -->
        <!-- <i class="play" src="./images/play.png" data-index="0"></i> -->
      </div>
    </div>
    <!-- 两张张图片/视频 -->
    <div class="gallery share-image share-image2" onclick="preview()">
      <div class="img2">
        <!-- data-url 文件地址 data-type 1 图片 2 视频 data-index 列表遍历索引 -->
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/1.jpg" data-index="0" data-type="1">
        <!-- 视频显示此播放按钮 -->
        <!-- <i class="play" src="./images/play.png" data-index="0"></i> -->
      </div>
      <div class="img2">
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/4.mp4" data-index="1" data-type="2">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png" data-index="1"></i>
      </div>
    </div>
    <!-- 三张张图片/视频 -->
    <div class="gallery share-image share-image2" onclick="preview()">
      <div class="img3">
        <!-- data-url 文件地址 data-type 1 图片 2 视频 data-index 列表遍历索引 -->
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/1.jpg" data-index="0" data-type="1">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png" data-index="0"></i>
      </div><div class="img3">
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/4.mp4" data-index="1" data-type="2">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png" data-index="1"></i>
      </div>
      <div class="img3">
        <img class="img-item" src="./images/1.jpg" alt="" data-url="./images/1.jpg" data-index="2" data-type="1">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png" data-index="2"></i>
      </div>
    </div>
    <!-- 四张张图片/视频 -->
    <div class="gallery share-image share-image2">
      <div class="img4">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img4">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img4">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img4">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
    </div>
    <!-- 五张张图片/视频 -->
    <div class="gallery share-image share-image2">
      <div class="img5">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img5">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img5">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img5">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img5">
        <img src="./images/1.jpg" alt="">
        <!-- 视频显示此播放按钮 -->
        <i class="play" src="./images/play.png"></i>
      </div>
      <div class="img5">
        <!-- 占位 勿删 -->
      </div>
    </div>
    <div class="result-list">
      <h2>处理结果</h2>
      <ul class="result">
        <li>
          <header>
            <img src="./images/3.jpg" alt="">
            <div>
              <p>张三三<span>（工程总监）</span></p>
              <b>2022-07-22 13:30</b>
            </div>
          </header>
          <p class="share-text">我是分享文案，我是分享文案，我是分享文案，我是分享文案，我是分享文案。</p>
          <!-- 一张图片/视频 -->
          <div class="gallery share-image" onclick="preview()">
            <div class="img1">
              <img src="./images/1.jpg" alt="" data-index="1" data-type="1">
              <!-- 视频 -->
              <i class="play" src="./images/play.png" data-index="1" data-type="2"></i>
            </div>
          </div>
          <!-- 两张张图片/视频 -->
          <div class="gallery share-image share-image2" onclick="preview()">
            <div class="img2">
              <img src="./images/1.jpg" alt="" data-index="1" data-type="1">
              <!-- 视频显示此播放按钮 -->
              <!-- <i class="play" src="./images/play.png" data-index="1" data-type="2"></i> -->
            </div>
            <div class="img2">
              <img src="./images/1.jpg" alt="" data-index="2" data-type="1">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png" data-index="2" data-type="2"></i>
            </div>
          </div>
          <!-- 三张张图片/视频 -->
          <div class="gallery share-image share-image2">
            <div class="img3">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img3">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img3">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
          </div>
          <!-- 四张张图片/视频 -->
          <div class="gallery share-image share-image2">
            <div class="img4">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img4">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img4">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img4">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
          </div>
          <!-- 五张张图片/视频 -->
          <div class="gallery share-image share-image2">
            <div class="img5">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img5">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img5">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img5">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img5">
              <img src="./images/1.jpg" alt="">
              <!-- 视频显示此播放按钮 -->
              <i class="play" src="./images/play.png"></i>
            </div>
            <div class="img5">
              <!-- 占位 勿删 -->
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="result-list comment">
      <h2>巡检评价</h2>
      <header>
        <img src="./images/3.jpg" alt="">
        <div>
          <p>张三三<span>（工程总监）</span></p>
          <b>2022-07-22 13:30</b>
        </div>
      </header>
      <div class="score">
        <span>评分:</span>
        <b>
          <i class="light"></i>
          <i></i>
          <i></i>
          <i></i>
          <i></i>
        </b>
        <span>非常差</span>
      </div>
    </div>
    <div class="reader">
      <h2>阅读人：6人</h2>
      <ul>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
        <li>
          <img src="./images/1.jpg" alt="">
          <span>姓名姓名</span>
        </li>
      </ul>
    </div>
  </section>

  <footer>
    <img src="./images/1.jpg" alt="">
    <span>上海宏宇装饰股份有限公司</span>
    <a href="tel:13800000001">立即咨询</a>
  </footer>

  <div class="preview">
    <img src="" alt="">
    <video src="" controls></video>
    <i class="close" onclick="closePreview()">×</i>
    <span class="left prev" onclick="prev()">&lt;</span>
    <span class="right next" onclick="next()">&gt;</span>
  </div>

  <script>
    var index = 0;
    var urlList = [];
    var wrapper = document.querySelector('.preview');
    var img = wrapper.querySelector('img');
    var video = wrapper.querySelector('video');
    var prevBtn = document.querySelector('.prev');
    var nextBtn = document.querySelector('.next');

    function preview(e) {
      var evt = e || window.event;
      index = evt.target.dataset.index;
      urlList = [];
      var els = evt.currentTarget.querySelectorAll('.img-item');
      els.forEach(el => {
        urlList.push({
          type: el.dataset.type,
          url: el.dataset.url
        })
      });
      if(urlList.length < 2) {
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'block';
        nextBtn.style.display = 'block';
      }
      var url = urlList[index].url;
      var type = urlList[index].type;
      if(type == 1) {
        img.style.display = 'block';
        video.style.display = 'none';
        img.src = url;
      } else if(type == 2) {
        img.style.display = 'none';
        video.style.display = 'block';
        video.src = url;
      }
      wrapper.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function prev() {
      if(index == 0) return;
      index --;
      var url = urlList[index].url;
      var type = urlList[index].type;
      if(type == 1) {
        img.style.display = 'block';
        video.style.display = 'none';
        img.src = url;
      } else if(type == 2) {
        img.style.display = 'none';
        video.style.display = 'block';
        video.src = url;
      }
    }

    function next() {
      if(index == urlList.length - 1) return;
      index ++;
      var url = urlList[index].url;
      var type = urlList[index].type;
      if(type == 1) {
        img.style.display = 'block';
        video.style.display = 'none';
        img.src = url;
      } else if(type == 2) {
        img.style.display = 'none';
        video.style.display = 'block';
        video.src = url;
      }
    }

    function closePreview(e) {
      wrapper.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  </script>
</body>
</html>